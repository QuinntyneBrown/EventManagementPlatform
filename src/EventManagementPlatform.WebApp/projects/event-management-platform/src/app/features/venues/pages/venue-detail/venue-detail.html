@if (isLoading) {
  <app-loading-spinner message="Loading venue..."></app-loading-spinner>
} @else if (venue) {
  <div class="venue-detail">
    <app-page-header [title]="venue.name" [breadcrumbs]="breadcrumbs" [showBackButton]="true" backLink="/venues">
      <app-status-badge [status]="venueStatusLabels[venue.status]" [color]="getStatusColor(venue.status)"></app-status-badge>
      <button mat-stroked-button [routerLink]="['edit']"><mat-icon>edit</mat-icon> Edit</button>
      <button mat-stroked-button color="warn" (click)="deleteVenue()"><mat-icon>delete</mat-icon> Delete</button>
    </app-page-header>

    <mat-tab-group class="venue-detail__tabs">
      <mat-tab label="Overview">
        <div class="venue-detail__content">
          <div class="venue-detail__grid">
            <mat-card>
              <mat-card-header><mat-card-title>Basic Information</mat-card-title></mat-card-header>
              <mat-card-content>
                <dl class="venue-detail__info">
                  <div><dt>Venue Type</dt><dd>{{ venueTypeLabels[venue.venueType] }}</dd></div>
                  <div><dt>Capacity</dt><dd>{{ venue.capacity | number }} guests</dd></div>
                  <div><dt>Hourly Rate</dt><dd>{{ formatCurrency(venue.hourlyRate) }}</dd></div>
                  <div><dt>Rating</dt><dd>{{ venue.rating }}/5 ‚≠ê</dd></div>
                  <div><dt>Total Events</dt><dd>{{ venue.totalEvents }}</dd></div>
                </dl>
                @if (venue.description) {
                  <div class="venue-detail__description"><h4>Description</h4><p>{{ venue.description }}</p></div>
                }
              </mat-card-content>
            </mat-card>

            <mat-card>
              <mat-card-header><mat-card-title>Location</mat-card-title></mat-card-header>
              <mat-card-content>
                <dl class="venue-detail__info">
                  <div><dt>Address</dt><dd>{{ venue.address }}</dd></div>
                  <div><dt>City</dt><dd>{{ venue.city }}</dd></div>
                  <div><dt>State</dt><dd>{{ venue.state }}</dd></div>
                  <div><dt>ZIP Code</dt><dd>{{ venue.zipCode }}</dd></div>
                </dl>
              </mat-card-content>
            </mat-card>

            <mat-card>
              <mat-card-header><mat-card-title>Contact Information</mat-card-title></mat-card-header>
              <mat-card-content>
                <dl class="venue-detail__info">
                  <div><dt>Contact Person</dt><dd>{{ venue.contactPerson || '-' }}</dd></div>
                  <div><dt>Phone</dt><dd>{{ venue.phone || '-' }}</dd></div>
                  <div><dt>Email</dt><dd>{{ venue.email || '-' }}</dd></div>
                  <div><dt>Website</dt><dd>@if (venue.website) { <a [href]="venue.website" target="_blank">{{ venue.website }}</a> } @else { - }</dd></div>
                </dl>
              </mat-card-content>
            </mat-card>

            @if (venue.amenities && venue.amenities.length > 0) {
              <mat-card>
                <mat-card-header><mat-card-title>Amenities</mat-card-title></mat-card-header>
                <mat-card-content>
                  <mat-chip-set>
                    @for (amenity of venue.amenities; track amenity) {
                      <mat-chip>{{ amenity }}</mat-chip>
                    }
                  </mat-chip-set>
                </mat-card-content>
              </mat-card>
            }
          </div>

          @if (venue.notes) {
            <mat-card class="venue-detail__notes">
              <mat-card-header><mat-card-title>Notes</mat-card-title></mat-card-header>
              <mat-card-content><p>{{ venue.notes }}</p></mat-card-content>
            </mat-card>
          }
        </div>
      </mat-tab>

      <mat-tab label="Events">
        <div class="venue-detail__content">
          <mat-card>
            <mat-card-content>
              <p class="venue-detail__placeholder">Events hosted at this venue will be displayed here.</p>
            </mat-card-content>
          </mat-card>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>
}

@if (isLoading) {
  <app-loading-spinner message="Loading customer..."></app-loading-spinner>
} @else if (customer) {
  <div class="customer-detail">
    <app-page-header [title]="customer.firstName + ' ' + customer.lastName" [breadcrumbs]="breadcrumbs" [showBackButton]="true" backLink="/customers">
      <app-status-badge [text]="customer.status" [color]="getStatusColor(customer.status)"></app-status-badge>
      <a mat-stroked-button [routerLink]="['edit']"><mat-icon>edit</mat-icon> Edit</a>
      <button mat-stroked-button color="warn" (click)="onDelete()"><mat-icon>delete</mat-icon> Delete</button>
    </app-page-header>

    <div class="customer-detail__content">
      <mat-card>
        <mat-card-header><mat-card-title>Contact Information</mat-card-title></mat-card-header>
        <mat-card-content>
          <dl class="customer-detail__info-list">
            <div class="customer-detail__info-item"><dt>Email</dt><dd>{{ customer.email }}</dd></div>
            <div class="customer-detail__info-item"><dt>Phone</dt><dd>{{ customer.phone || 'Not provided' }}</dd></div>
            <div class="customer-detail__info-item"><dt>Company</dt><dd>{{ customer.company || 'Not provided' }}</dd></div>
            <div class="customer-detail__info-item"><dt>Events</dt><dd>{{ customer.eventCount }}</dd></div>
          </dl>
        </mat-card-content>
      </mat-card>

      @if (customer.address || customer.city || customer.state || customer.postalCode) {
        <mat-card>
          <mat-card-header><mat-card-title>Address</mat-card-title></mat-card-header>
          <mat-card-content>
            <p>{{ customer.address }}</p>
            <p>{{ customer.city }}{{ customer.state ? ', ' + customer.state : '' }} {{ customer.postalCode }}</p>
          </mat-card-content>
        </mat-card>
      }

      @if (customer.notes) {
        <mat-card>
          <mat-card-header><mat-card-title>Notes</mat-card-title></mat-card-header>
          <mat-card-content><p>{{ customer.notes }}</p></mat-card-content>
        </mat-card>
      }
    </div>
  </div>
}
